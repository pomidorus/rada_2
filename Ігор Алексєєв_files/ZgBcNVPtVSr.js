/*!CK:1021523958!*//*1437417646,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["vO3jL"]); }

__d("ActivityLogStory",["ge","DOM","Event","Toggler","Run"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={removeStory:function(m,n){var o=g(m);o&&h.setContent(o,n);},registerPopover:function(m){var n=i.listen(window,'scroll',function(o){j.hide(m);});k.onLeave(n.remove.bind(n));}};e.exports=l;},null);
__d("MorePagerFetchOnScroll",["AsyncRequest","DOMQuery","Event","Style","Vector","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={};function n(o,p,q){"use strict";this._pager=o;this._offset=p||0;this._hasEventHandlers=false;if(q)this.setup();m[o.id]=this;}n.prototype.setup=function(){"use strict";this._scrollParent=j.getScrollParent(this._pager);this.setPagerInViewHandler(this._defaultPagerInViewHandler.bind(this));if(!this.check()){this._scrollListener=i.listen(this._scrollParent,'scroll',l(function(){this.check();}.bind(this),50));this._clickListener=i.listen(this._scrollParent,'click',l(function(){this.check();}.bind(this),50));this._hasEventHandlers=true;}};n.prototype.check=function(){"use strict";if(!h.contains(document.body,this._pager)){this.removeEventListeners();return true;}var o=k.getElementPosition(this._pager).y,p=this._scrollParent===window?k.getViewportDimensions().y:k.getElementDimensions(this._scrollParent).y,q=this._scrollParent===window?k.getScrollPosition().y+p:k.getElementPosition(this._scrollParent).y+p;if(o-this._offset<q){this._inViewHandler();this.removeEventListeners();return true;}return false;};n.prototype.removeEventListeners=function(){"use strict";if(this._hasEventHandlers){this._scrollListener&&this._scrollListener.remove();this._clickListener&&this._clickListener.remove();this._hasEventHandlers=false;}};n.prototype.setPagerInViewHandler=function(o){"use strict";this._inViewHandler=o;return this;};n.prototype._defaultPagerInViewHandler=function(){"use strict";var o=h.scry(this._pager,'a')[0];if(o)g.bootstrap(o.getAttribute('ajaxify')||o.href,o);};n.getInstance=function(o){"use strict";return m[o];};e.exports=n;},null);
__d("AllActivityContentLoader",["Arbiter","CSS","DOM","DOMScroll","OnVisible","Parent","MorePagerFetchOnScroll","TimelineComponentKeys","TimelineConstants","TimelineController","TimelineLegacySections","TimelineSmartInsert","UIPagelet","Vector","$","clickRefAction","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();var x=false,y=0,z=null,aa={},ba=[],ca={},da=[],ea=null;function fa(ja,ka,la,ma,na){this.node=ja;this._canScrollLoad=true;this.scrubberKey=ka;this._pageletLoadData=la;this.loaded=ma;this.sortKey=na;this.contentNode=i.scry(ja,"div._z6j")[0];}function ga(){if(x)return;p.register(n.CONTENT,ia);v('scrubber').set_namespace('allactivity');x=true;}function ha(ja){var ka=q.get(ja);ka&&ka._canScrollLoad&&ka.load();}Object.assign(fa.prototype,{load:function(){if(this.loaded)return;this.loaded=true;this.contentNode&&h.hide(this.contentNode);h.show(l.byClass(this.node,'fbTimelineSection'));var ja=this.node;function ka(ma){r.run(ja,ma);}var la=i.find(this.node,'div.fbTimelineLogStream');da.push(s.loadFromEndpoint('TimelineEntStoryActivityLogPagelet',la.id,this._pageletLoadData,{usePipe:true,jsNonblock:true,constHeight:true,displayCallback:ka,append:true}));},contentAdded:function(ja){if(!this.hasContent){h.removeClass(l.byClass(this.node,'stat_elem'),'async_saving');if(this.contentNode){ja&&i.prependContent(this.contentNode,ja);h.show(this.contentNode);}this.hasContent=true;}},fullyLoaded:function(){if(!this.hasContent){h.removeClass(l.byClass(this.node,'stat_elem'),'async_saving');h.show(i.find(this.node,"div._40pu"));this.contentNode&&h.hide(this.contentNode);}},activateScrollLoad:function(){this._canScrollLoad=true;ca[this.scrubberKey]&&ca[this.scrubberKey].reset();},deactivateScrollLoad:function(){if(!this.loaded){this._canScrollLoad=false;}else{var ja=i.scry(this.node,'.uiMorePager');if(ja)ja.map(function(ka){var la=m.getInstance(ka.id);la&&la.removeEventListeners();});}ca[this.scrubberKey]&&ca[this.scrubberKey].remove();},getParent:function(){if(this.parentKey)return q.get(this.parentKey);return null;}});var ia={SCROLL_TO_OFFSET:115,HEADER_SCROLL_CUTOFF:30,CURRENT_SECTION_OFFSET:150,registerTimePeriod:function(ja,ka,la,ma,na,oa){ga();var pa=new fa(ja,ka,la,ma,oa);if(!na){ba.push(ka);aa[ka]=true;}else{pa.parentKey=na;q.get(na).subSections=q.get(na).subSections||[];q.get(na).subSections.push(pa);q.get(na).subSections.sort(function(qa,ra){return ra.sortKey-qa.sortKey;});}q.set(ka,pa);ia.checkCurrentSectionChange();g.inform(o.SECTION_REGISTERED,{scrubberKey:ka},g.BEHAVIOR_PERSISTENT);},reset:function(){ia.stopLoadingContent();x=false;q.removeAll();y=0;z=null;aa={};ba=[];ca={};da=[];ea=null;},stopLoadingContent:function(){for(var ja in ca)ca[ja]&&ca[ja].remove();for(var ka=0;ka<da.length;ka++)da[ka].cancel();},setContentHeader:function(ja){ea=ja;},checkCurrentSectionChange:function(){var ja=ia.getCurrentSection(),ka=z&&z.scrubberKey;if(ja&&ja.scrubberKey!==ka){z=ja;var la=ja.scrubberKey,ma=ja.parentKey;if(!ma){ma=la;la=null;}p.sectionHasChanged(ma,la);}},getCurrentSection:function(){var ja={},ka=q.getAll();for(var la in ka){var ma=ka[la];if(!ma.loaded)continue;var na=t.getElementPosition(ma.node,'viewport').y;if(na<ia.CURRENT_SECTION_OFFSET)ja[na]=ma;}var oa=Math.max.apply(this,Object.keys(ja)),pa=oa==-Infinity;if(!pa){return ja[oa];}else return null;},enableScrollLoad:function(ja,ka,la){ja=u(ja);var ma=ia.getNextSectionKey(ka);if(ma)ca[ma]=new k(ja,ha.bind(null,ma),false,la||1000);},getNextSectionKey:function(ja){var ka=q.get(ja),la=ka.getParent(),ma=null,na=null;if(la)for(var oa=0;oa<la.subSections.length-1;oa++)if(la.subSections[oa].scrubberKey==ja)ma=la.subSections[oa+1].scrubberKey;if(!ma)for(var pa=0;pa<ba.length-pa;pa++)if(ba[pa]==la.scrubberKey){na=q.get(ba[pa+1]).subSections[0];if(na)ma=na.scrubberKey;}return ma;},navigateToSection:function(ja,ka,la){ka=!!ka;var ma=q.get(ja);if(!ma)return;if(!ma.getParent()){ja=ma.subSections[0].scrubberKey;ma=q.get(ja);}for(var na=0;na<ba.length;na++){var oa=q.get(ba[na]);for(var pa=0;pa<oa.subSections.length;pa++){if(oa.subSections[pa].scrubberKey==ja)break;oa.subSections[pa].deactivateScrollLoad();}if(oa.scrubberKey==ma.getParent().scrubberKey)break;}ma.activateScrollLoad();ma.load();ia.adjustContentPadding();var qa=t.getScrollPosition().x,ra=t.getElementPosition(ma.node).y;if(!ka){var sa=ia.SCROLL_TO_OFFSET;j.scrollTo(new t(qa,ra-sa,'document'));}},adjustContentPadding:function(){u('fbTimelineLogBody').style.paddingBottom=t.getViewportDimensions().y-ia.CURRENT_SECTION_OFFSET-ia.HEADER_SCROLL_CUTOFF+'px';},sectionHasContent:function(ja){var ka=q.get(ja);ka&&ka.contentAdded(ea);ea=null;},sectionFullyLoaded:function(ja){var ka=q.get(ja);ka&&ka.fullyLoaded();}};e.exports=ia;},null);
__d("BrowseGroupResult",["Event"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(){}h.toggle=function(i,j,k){g.listen(j,'click',function(){k.toggle();i.hideFlyout();});};e.exports=h;},null);
__d("ActivityLogSearch",["Event","CSS","DOM","Input","Run"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n,o){var p=i.find(o,'.inputtext'),q=g.listen(n,'click',function(){h.hide(m);h.show(o);p.focus();});k.onLeave(q.remove.bind(q));var r=g.listen(p,'blur',function(){if(!j.getValue(p)){h.hide(o);h.show(m);}});k.onLeave(r.remove.bind(r));}e.exports=l;},null);
__d("PopoverMenuDynamicTooltip",["DOMQuery","Tooltip","csx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k){"use strict";this._popoverMenu=k;this._setMenuSubscription=null;this._changeSubscription=null;}j.prototype.enable=function(){"use strict";this._setMenuSubscription=this._popoverMenu.subscribe('setMenu',this._onSetMenu.bind(this));};j.prototype.disable=function(){"use strict";this._popoverMenu.unsubscribe(this._setMenuSubscription);this._setMenuSubscription=null;this._removeChangeSubscription();};j.prototype._onSetMenu=function(){"use strict";this._removeChangeSubscription();this._menu=this._popoverMenu.getMenu();this._changeSubscription=this._menu.subscribe('change',function(k,l){var m=l.item;if(l[0])m=l[0].item;if(!m)return;var n=m.getLabel();n=n?n.toString():null;if(!n)return;var o=this._popoverMenu.getTriggerElem(),p=g.scry(o,"span._55pe")[0];if(p&&p.nodeName){var q=p.parentNode;if(q)h.set(q,n);}}.bind(this));};j.prototype._removeChangeSubscription=function(){"use strict";if(this._changeSubscription){this._menu.unsubscribe(this._changeSubscription);this._changeSubscription=null;}};e.exports=j;},null);
__d("TimelineAllActivitySideNav",["CSS","DOM","DOMDimensions","DOMQuery","FutureSideNav","PageTransitions","Scroll","Style","UIPagelet","$","csx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();function s(u){var v=u==='review'||u==='tagreview',w=r('rightColContent'),x=w&&j.scry(w,".fbTimelineLogScrubber")[0];x&&g.conditionShow(x,!v);}var t={init:function(u,v,w,x,y){var z=j.find(p('contentArea'),"._6-0"),aa=h.getID(z);n.set(z,'minHeight',i.getViewportDimensions().height+'px');g.addClass(u,'fixed_elem');s(y||'all');l.registerHandler(function(ba){if(v===ba.getPath()&&ba.getQueryData().sk==w){var ca=Object.assign({profile_id:x,renderContentsOnly:1,uripath:ba.toString()},ba.getQueryData()),da=k.getInstance(),ea=da&&da._getItemForKey(ca.log_filter||'all');ea&&da.setLoading(ea);o.loadFromEndpoint('TimelineAllActivityColumn',aa,ca,{jsNonblock:true,constHeight:true,displayCallback:function(fa){fa();ea&&da.setSelected(ea);m.setTop(document.body,0);s(ca.log_filter||'all');l.transitionComplete(true);}});return true;}return false;});}};e.exports=t;},null);