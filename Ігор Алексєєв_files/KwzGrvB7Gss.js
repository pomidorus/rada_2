/*!CK:605277457!*//*1436763444,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["pnnji"]); }

__d("FriendsCenterStickyController",["StickyController"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k,l,m,n){"use strict";g.call(this,k,l,m,n);this.$FriendsCenterStickyController0=l;this.$FriendsCenterStickyController1=n||k.parentNode;var o=k.getBoundingClientRect();this.$FriendsCenterStickyController2=o.bottom-o.top;this.$FriendsCenterStickyController3=true;}j.prototype.unstick=function(){"use strict";this.$FriendsCenterStickyController3=false;this.handleScroll();};j.prototype.restick=function(){"use strict";this.$FriendsCenterStickyController3=true;this.handleScroll();};j.prototype.shouldFix=function(){"use strict";if(!this.$FriendsCenterStickyController3)return false;var k=this.$FriendsCenterStickyController1.getBoundingClientRect();return this.$FriendsCenterStickyController0>=k.top&&this.$FriendsCenterStickyController0+this.$FriendsCenterStickyController2<k.bottom;};e.exports=j;},null);
__d("FriendsCenterStickyHeader",["BlueBar","CSS","DOM","FriendsCenterStickyController","Style","Vector","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=[];function o(p){"use strict";var q=g.getBar();if(!q)return;var r=k.isFixed(q)?l.getElementDimensions(q).y:0,s=this.getPlaceholder(p.getBoundingClientRect());i.insertAfter(p,s);h.addClass(p,"_5m65");var t=new j(p,r,function(u){h.conditionShow(s,u);h.conditionClass(p,'stuck',u);}.bind(this));t.start();n[p.id]=t;}o.prototype.getPlaceholder=function(p){"use strict";var q=i.create('div');h.hide(q);k.set(q,'height',(p.bottom-p.top)+'px');k.set(q,'width',(p.right-p.left)+'px');return q;};o.stopSticky=function(p){"use strict";p&&(p.id in n)&&n[p.id].unstick();};o.startSticky=function(p){"use strict";p&&(p.id in n)&&n[p.id].restick();};e.exports=o;},null);
__d("FriendBrowserCheckboxController",["Arbiter","AsyncRequest","CSS","DOM","Event","Form","FriendsCenterStickyHeader","OnVisible","$","bind","csx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s='friend_browser_list';function t(){}Object.assign(t,{instances:{},getInstance:function(u){return this.instances[u];}});Object.assign(t.prototype,{init:function(u,v,w,x){t.instances[u]=this;this._id=u;this._simplified=w;this._infiniteScroll=x;this._form=v;this._contentGrid=j.find(v,'.friendBrowserCheckboxContentGrid');this._loadingIndicator=j.find(v,'.friendBrowsingCheckboxContentLoadingIndicator');this._checkboxResults=j.find(v,'.friendBrowserCheckboxResults');this._contentPager=j.find(v,'.friendBrowserCheckboxContentPager');this._standaloneFilters=null;this._searchStarted=false;this._stickyHeader=null;g.subscribe('friend-browser/name-change',this.getNew.bind(this,false));this.numGetNewRequests=0;this.queuedRequests={};k.listen(this._form,'submit',this.onFormSubmit.bind(this));},addTypeahead:function(u,v){u.subscribe('select',this.onHubSelect.bind(this,u,v));if(this._simplified)u.subscribe('unselect',this.onHubSelect.bind(this,u,v));},setStandaloneFilters:function(u){if(u){this._standaloneFilters=j.scry(document.body,'.friendBrowserCheckboxFilters')[0];this._stickyHeader=j.scry(o('fbSearchResultsBox'),"._5m65")[0];var v=o('doneSearchButton');v.onclick=function(){this._searchStarted=false;j.scry(document.body,"._5n-u").forEach(function(w){i.show(w);});i.hide(v);window.scrollTo(0,0);m.startSticky(this._stickyHeader);}.bind(this);}return this;},onFormSubmit:function(){this.getNew(true);return false;},addSelector:function(u){u.subscribe('change',this.getNew.bind(this,false));},onHubSelect:function(u,v,event,w){if(this._simplified){this.getNew(true);return;}if(!((event=='select')&&w.selected))return;var x=this.buildNewCheckbox(v,w.selected.text,w.selected.uid),y=j.find(this._standaloneFilters||this._form,'.checkboxes_'+v);j.appendContent(y.firstChild,x);var z=j.scry(u.getElement(),'input[type="button"]');if(z&&z[0])z[0].click();this.getNew(true);},buildNewCheckbox:function(u,v,w){var x=u+'_ids_'+w,y=u+'_ids[]',z=j.create('input',{id:x,type:'checkbox',value:w,name:y,checked:true});k.listen(z,'click',p(this,'getNew',false));var aa=j.create('td',null,z);i.addClass(aa,'vTop');i.addClass(aa,'hLeft');var ba=j.create('label',null,v),ca=j.create('td',null,ba);i.addClass(ca,'vMid');i.addClass(ca,'hLeft');var da=j.create('tr');da.appendChild(aa);da.appendChild(ca);return da;},showMore:function(){var u=j.scry(this._contentPager,'.friendBrowserMorePager')[0];if(!u)return false;if(i.hasClass(u,'async_saving'))return false;var v=this.numGetNewRequests,w=this.getFormData();w.show_more=true;if(this._searchStarted)w.page=s;new h().setURI('/ajax/growth/friend_browser/checkbox.php').setData(w).setHandler(p(this,function(x){this.showMoreHandler(x,v);})).setStatusElement(u).send();},showMoreHandler:function(u,v){if(v==this.numGetNewRequests){var w=u.payload;j.appendContent(this._contentGrid,w.results);this.updatePagerAndExtraData(w.pager,w.extra_data);}},getFormData:function(){var u=l.serialize(this._form);if(this._standaloneFilters){var v=l.serialize(this._standaloneFilters);for(var w in v)u[w]=v[w];}return u;},getNew:function(u){this.numGetNewRequests++;var v=this.numGetNewRequests;i.addClass(this._checkboxResults,'friendBrowserCheckboxContentOnload');if(r('friendBrowserCI'))i.addClass(o('friendBrowserCI'),'friendBrowserCheckboxContentOnload');this.startStandaloneSearch();i.show(this._loadingIndicator);var w=this.getFormData();w.used_typeahead=u;if(this._searchStarted)w.page=s;new h().setURI('/ajax/growth/friend_browser/checkbox.php').setData(w).setHandler(p(this,function(x){this.getNewHandler(x,v);})).send();},getNewHandler:function(u,v){if(v==this.numGetNewRequests){var w=u.payload;j.setContent(this._contentGrid,w.results);i.removeClass(this._checkboxResults,'friendBrowserCheckboxContentOnload');if(r('friendBrowserCI'))i.hide(o('friendBrowserCI'));i.hide(this._loadingIndicator);this.updatePagerAndExtraData(w.pager,w.extra_data);}},startStandaloneSearch:function(){if(!this._standaloneFilters)return;window.scrollTo(0,0);if(this._searchStarted)return;this._searchStarted=true;i.show(o('fbSearchResultsBox'));j.scry(document.body,"._5n-u").forEach(function(u){i.hide(u);});i.show(o('doneSearchButton'));m.stopSticky(this._stickyHeader);},updatePagerAndExtraData:function(u,v){j.setContent(this._contentPager,u);if(this._infiniteScroll)this.setupOnVisible();j.replace(this._form.elements.extra_data,v);},setupOnVisible:function(){var u=j.scry(this._contentPager,'.friendBrowserMorePager')[0];if(u&&this._id!='jewel'){this._onVisible&&this._onVisible.remove();this._onVisible=new n(u,p(this,'showMore'),false,1000);}}});e.exports=t;},null);
__d("legacy:friend-browser-checkbox-js",["FriendBrowserCheckboxController"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.FriendBrowserCheckboxController=b('FriendBrowserCheckboxController');},3);
__d("XFriendJewelNotifsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/friendjewel\/friendconfirmednotifications\/",{alert_ids:{type:"IntVector",required:true},action:{type:"String",required:true}});},null);
__d("FriendConfirmedNotifs",["Event","shield","CSS","DOM","ge","Arbiter","AsyncRequest","Parent","XFriendJewelNotifsController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();function p(q){"use strict";g.listen(q.close,'click',this.$FriendConfirmedNotifs0.bind(this));this.$FriendConfirmedNotifs1=q.unread_notifs;this.$FriendConfirmedNotifs2=q.unit;if(this.$FriendConfirmedNotifs1.length)this.$FriendConfirmedNotifs3=g.listen(this.$FriendConfirmedNotifs2,'click',this.$FriendConfirmedNotifs4.bind(this));if(this.$FriendConfirmedNotifs1.length)l.subscribeOnce('requestsJewel/closed',h(this.$FriendConfirmedNotifs5,this));if(q.read_notifs_to_set.length)this.$FriendConfirmedNotifs6(q.read_notifs_to_set,'set_time');this.$FriendConfirmedNotifs7=q.notifids;}p.prototype.$FriendConfirmedNotifs8=function(q){"use strict";var r=false,s=k('fbRequestsFlyout'),t=j.find(s,'.requestsUnitTitle'),u=j.scry(q,'.friendConfirmedNotifsUnitTitle')[0];if(!u){r=true;u=j.find(s,'.friendConfirmedNotifsUnitTitle');}if(r){i.show(j.find(t,'.requestsJewelLinks'));j.replace(u,t);}else i.hide(u);};p.prototype.$FriendConfirmedNotifs0=function(event){"use strict";var q=event.getTarget(),r=n.byClass(q,'friendConfirmedNotifsUnitAggregated'),s=r.parentElement;i.hide(r);this.$FriendConfirmedNotifs8(s);this.$FriendConfirmedNotifs6(this.$FriendConfirmedNotifs7,'xout');};p.prototype.$FriendConfirmedNotifs6=function(q,r){"use strict";var s=o.getURIBuilder().setIntVector('alert_ids',q).setString('action',r).getURI();new m().setURI(s).send();};p.prototype.$FriendConfirmedNotifs5=function(){"use strict";if(!this.$FriendConfirmedNotifs1.length)return;this.$FriendConfirmedNotifs6(this.$FriendConfirmedNotifs1,'mark_read');i.removeClass(this.$FriendConfirmedNotifs2.childNodes[0],'friendConfirmedNotifsUnread');this.$FriendConfirmedNotifs1=[];};p.prototype.$FriendConfirmedNotifs4=function(event){"use strict";this.$FriendConfirmedNotifs3.remove();this.$FriendConfirmedNotifs5();};f.init=function(q){new p(q);};},null);
__d("FriendConfirmedNotifsClickLogging",["Event","AsyncSignal"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={addClickLoggingListener:function(j,k){g.listen(j,'click',function(){new h(k).send();});}};e.exports=i;},null);
__d("legacy:onvisible",["OnVisible"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.OnVisible=b('OnVisible');},3);
__d("JewelFollowupUnit",["DOM","Arbiter","CSS","csx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l,m,n,o){this._followup=m;this._parentContainer=this._followup.parentNode;this._friendRequest=this._parentContainer.firstChild;n&&h.subscribe(n,function(q,r){(r.uid==l)&&this._showFollowup();}.bind(this));var p=g.scry(this._parentContainer,"._e7")[0];p&&(p.onclick=this._hideFollowup.bind(this));o&&h.subscribe(o,function(q,r){(r.uid==l)&&this._hideFollowup();}.bind(this));}Object.assign(k.prototype,{_showFollowup:function(){this._updateRequestAnimClass();i.addClass(this._followup,'active');i.addClass(this._parentContainer,'followupActivated');},_hideFollowup:function(){this._updateRequestAnimClass();i.removeClass(this._followup,'active');i.removeClass(this._parentContainer,'followupActivated');},_updateRequestAnimClass:function(){i.conditionClass(this._friendRequest,'animated',i.hasClass(this._followup,'animated'));}});e.exports=k;},null);
__d("InnerStickyArea",["ContextualLayer","CSS","DataStore","DOM","Event","LayerHideOnTransition","Locale","Parent","Scroll","Style","Vector","cx","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();function t(w){var x=n.byClass(w,'scrollable')||p.getScrollParent(w.parentNode);return x;}function u(w){"use strict";var x=t(w);this.node=w;this._extracted=false;this._placeholder=j.create('div',{className:"_ptr"});v.getInstance(x).register(this);}u.prototype.update=function(){"use strict";if(this._extracted){q.getElementDimensions(this._placeholder).setElementWidth(this.node);q.getElementDimensions(this.node).setElementHeight(this._placeholder);}else q.getElementDimensions(this.node).setElementWidth(this.node).setElementHeight(this._placeholder);return this;};u.prototype.setExtracted=function(w){"use strict";if(w===this._extracted)return this;if(w){this.update();j.replace(this.node,this._placeholder);}else{p.set(this.node,'height',null);p.set(this.node,'width',null);if(this._placeholder.parentNode){j.replace(this._placeholder,this.node);}else j.remove(this.node);}this._extracted=w;return this;};u.prototype.getInlineNode=function(){"use strict";return this._extracted?this._placeholder:this.node;};u.prototype.isDisplayed=function(){"use strict";var w=this.getInlineNode();return w.offsetWidth>0&&w.offsetHeight>0;};u.prototype.getStickyContainer=function(){"use strict";return this._stickyContainer;};u.prototype.updateContainer=function(){"use strict";var w=t(this.node);v.getInstance(w).register(this);};u.prototype.destroy=function(){"use strict";this.getStickyContainer().unregister(this);};u.getStickyContainer=function(w){"use strict";return v.getInstance(t(w));};function v(w){"use strict";this.node=w;this._areas=[];this._fixTarget=null;this._fixedArea=null;this._initialized=false;this._layer=new g({permanent:true},j.create('div')).setInsertParent(this.node.parentNode).disableBehavior(l);this._listener=k.listen(w,'scroll',this.update.bind(this));h.addClass(w,"_pts");i.set(w,'StickyContainer',this);}v.prototype.isDisplayed=function(){"use strict";return this.node.offsetWidth>0&&this.node.offsetHeight>0;};v.prototype.register=function(w){"use strict";if(w.getStickyContainer())w.getStickyContainer().unregister(w);w._stickyContainer=this;this._areas.push(w);this.update();return this;};v.prototype.unregister=function(w){"use strict";s(this._areas,w);this.update();};v.prototype.update=function(){"use strict";if(!this.isDisplayed())return this;var w=null,x=this,y=o.getTop(this.node),z;for(var aa=0;aa<this._areas.length;aa++){var ba=this._areas[aa],ca=ba.getInlineNode();if(!ba.isDisplayed())continue;if(!j.contains(this.node.parentNode,ca))continue;var da=ca.offsetTop;if(da<=y){if(z===(void 0)||da>z){w=ba;z=da;}}else if(w){var ea=q.getElementDimensions(w.node).y;if(da-ea<y)x=ba;break;}}if(this._fixedArea===w&&this._fixTarget===x){this._fixedArea&&this._fixedArea.update();}else{if(this._fixedArea&&this._fixedArea!==w)this._unfixArea(this._fixedArea);if(w)this._fixAreaTo(w,x);this._fixedArea=w;this._fixTarget=x;}return this;};v.prototype.destroy=function(){"use strict";this._listener&&this._listener.remove();this._listener=null;};v.prototype._fixAreaTo=function(w,x){"use strict";this._layer.hide();w.setExtracted(true);if(x instanceof v){this._layer.setInsertParent(this.node.parentNode).setAlignment(m.isRTL()?'right':'left').setContext(this.node);}else this._layer.setInsertParent(this.node).setContext(x.node);this._layer.setContent(w.node).show();h.addClass(w.node,"_57kj");};v.prototype._unfixArea=function(w){"use strict";this._layer.hide();w.setExtracted(false);h.removeClass(w.node,"_57kj");};v.getInstance=function(w){"use strict";var x=i.get(w,'StickyContainer');return x||new v(w);};e.exports=u;},null);