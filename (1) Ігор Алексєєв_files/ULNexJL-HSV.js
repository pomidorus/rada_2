/*!CK:2992925187!*//*1438570722,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["Ui8v4"]); }

__d("Tour",["Arbiter","LayerDestroyOnHide","LayerHideOnEscape","NavigationMessage","PageEvents"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(){"use strict";if(l._instance)l._instance.setTourComplete();l._instance=this;}l.prototype.init=function(){"use strict";this._pageLeaveToken=g.subscribe(k.AJAXPIPE_ONUNLOAD,this.handleLeavePage.bind(this));this._navigationBeginToken=g.subscribe(j.NAVIGATION_BEGIN,this.handleTransition.bind(this));this.steps={};return this;};l.prototype.registerStep=function(m,n){"use strict";m.disableBehavior(h);m.disableBehavior(i);this.steps[n]=m;m.subscribe('show',function(){m.inform('tour-dialog-show',m);});if(!this.getTourStarted())this.setTourStart();};l.prototype._unsubscribeSubscriptions=function(){"use strict";this._navigationBeginToken.unsubscribe();this._pageLeaveToken.unsubscribe();};l.prototype.handleLeavePage=function(){"use strict";this._unsubscribeSubscriptions();};l.prototype.handleTransition=function(){"use strict";this._unsubscribeSubscriptions();};l.prototype.handleTourStart=function(){"use strict";};l.prototype.handleTourStop=function(){"use strict";};l.prototype.handleTourComplete=function(){"use strict";};l.prototype.showStep=function(m){"use strict";var n=this.steps[m];if(!(this.openDialog==n))this.hideOpenDialog();if(!n)return;this.openDialog=n;n.show();};l.prototype.hideOpenDialog=function(){"use strict";if(this.openDialog){this.openDialog.hide();this.openDialog=null;}};l.prototype.getTourStarted=function(){"use strict";return this.tourStarted;};l.prototype.setTourStart=function(){"use strict";this.tourStarted=true;this.handleTourStart();};l.prototype.setTourStop=function(){"use strict";this.tourStarted=false;this.hideOpenDialog();this.handleTourStop();};l.prototype.setTourComplete=function(){"use strict";if(this.tourComplete)return;this.setTourStop();this.tourComplete=true;this.handleTourComplete();};l.prototype.hideStep=function(m){"use strict";var n=this.steps[m];n&&n.hide();};l.getInstance=function(){"use strict";return l._instance||(l._instance=new l());};Object.assign(l.prototype,{tourStarted:false,tourComplete:false,_navigationBeginToken:null,_pageLeaveToken:null,steps:{},openDialog:null});e.exports=l;},null);
__d("PageFanning",["Animation","AsyncRequest","CSS","DOM","Parent","URI","ActorURI","$","collectDataAttributes"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={setFanStatus:function(r,s,t,u,v,w,x){var y={ft:{}};if(r)y={ft:o(r,['ft']).ft};v=v||function(ca){var da=ca.getPayload();if(!da||!r)return;if(da.reload){p.reloadOnFanStatusChanged();}else q(r,da);};var z={fbpage_id:s,add:t,reload:u};if(x!=null)Object.assign(z,x);Object.assign(z,y);var aa='/ajax/pages/fan_status.php';if(x!=null&&x.actor_id!=null)aa=m.create(aa,x.actor_id);var ba=new h().setURI(aa).setData(z).setNectarModuleDataSafe(r).setHandler(v);if(w)ba.setErrorHandler(w);ba.send();return false;},reloadOnFanStatusChanged:function(){var r=l.getRequestURI();window.location.href=r;},toggleLikeOnFanStatusChanged:function(r,s){var t=n('liked_pages_like_action_'+r),u=n('liked_pages_undo_action_'+r);i.conditionClass(t,'hidden_elem',s);i.conditionClass(u,'hidden_elem',!s);}};function q(r,s){var t=s.feedback;if(!t)return;if(k.byClass(r,'fbTimelineEscapeSectionItem'))r=k.byClass(r,'fan_status_inactive')||r;var u=j.create('span',{className:'fan_status_inactive'},t);r.parentNode.replaceChild(u,r);var v=function(){if(s.can_repeat_action)u.parentNode.replaceChild(r,u);};new g(u).duration(3000).checkpoint().to('backgroundColor','#FFFFFF').duration(1000).ondone(v).go();}e.exports=p;},null);
__d("XPagesLikeCountController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pages\/x\/updateLikeCountDomString\/",{page_id:{type:"Int",required:true},like_id:{type:"String",required:true}});},null);
__d("PageLikeButton",["Arbiter","AsyncRequest","AsyncResponse","Event","FeedBlacklistButton","PageFanning","PageLikeConstants","SubscribeButton","Tour","XPagesLikeCountController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q={init:function(r,s,t,u,v,w,x,y,z,aa,ba,ca){g.subscribe(m.LIKED,function(da,ea){if(this._shouldUpdateButton(u,ca,ea)){r.swap();if(!z)t.suppressNextMouseEnter&&t.suppressNextMouseEnter();}}.bind(this));g.subscribe(m.UNLIKED,function(da,ea){if(this._shouldUpdateButton(u,ca,ea)){r.unswap();t.hideFlyout&&t.hideFlyout();}}.bind(this));if(ba)g.subscribe(m.SPM_CALLOUT,function(da,ea){if(this._shouldUpdateButton(u,ca,ea)){ba.show();g._releaseAllEvents(m.SPM_CALLOUT);}}.bind(this));j.listen(s,'click',function(event){var da=r.getCurrentButton();if(ca&&ca.actor_id!==null){var ea={actor_id:ca.actor_id};this._likeButtonAction(u,v,w,x,da,event,ea);}else this._likeButtonAction(u,v,w,x,da,event);}.bind(this));},initCallout:function(r,s){var t=document.getElementById('pageActionLikeCalloutButton');j.listen(t,'click',this._likeButtonAction(r,s,null,null,null));},initUnlike:function(r,s,t,u){var v=u?u.actor_id:null;j.listen(r,'click',function(event){this.doUnlikeAction(event,s,t,v);}.bind(this));},doUnlikeAction:function(event,r,s,t){this._saveLike(event.getTarget(),r,false,function(u){g.inform(m.LIKED,{profile_id:r,actor_id:t});i.defaultErrorHandler(u);},s,null,null,{actor_id:t});this.informUnlike(r,t);},informLike:function(r,s,t,u){var v=u?u.actor_id:v,w={profile_id:r,actor_id:v,target:s,origin:t};g.inform(m.LIKED,w);w.connected=true;g.inform(n.SUBSCRIBED,w);g.inform(k.UNBLACKLIST,w);},informLikeSuccess:function(r){var s={profile_id:r};g.inform(m.LIKED_SUCCESS,s);g.inform(m.SPM_CALLOUT,s);},informUnlike:function(r,s){var t={profile_id:r,actor_id:s};setTimeout(g.inform.bind(g,m.UNLIKED,t),0);t.connected=false;setTimeout(g.inform.bind(g,n.UNSUBSCRIBED,t),0);g.inform(k.BLACKLIST,t);},updateLikeCount:function(r,s){g.subscribe(m.LIKED_SUCCESS,function(t,u){var v=u.profile_id;if(s==v){var w=p.getURIBuilder().setInt('page_id',s).setString('like_id',r).getURI();new h().setURI(w).send();}});},_saveLike:function(r,s,t,u,v,w,x,y){var z=y?y.actor_id:null;o.getInstance().hideStep('low_page_likes');l.setFanStatus(r,s,t,false,function(){q.informLikeSuccess(s);},u,{fan_origin:v,fan_source:w,cat:x,actor_id:z});},_likeButtonAction:function(r,s,t,u,v,event,w){var x=w?w.actor_id:null;this._saveLike(event.getTarget(),r,true,function(y){g.inform(m.UNLIKED,{profile_id:r,actor_id:x});i.defaultErrorHandler(y);},s,t,u,w);q.informLike(r,v,s,w);},_shouldUpdateButton:function(r,s,t){var u=s?s.actor_id:null;if(r===t.profile_id){if(u===null)return true;if(t.actor_id!==null&&u===t.actor_id)return true;}return false;}};e.exports=q;a.PageLikeButton=q;},null);
__d("HoverButton",["AsyncRequest","CSS","DOM","URI","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n,o,p){"use strict";this._button=m;this._flyout=n;this._flyoutAjaxify=p;this._flyoutContent=o;n.subscribe('show',this._onShow.bind(this));n.subscribe('hide',this._onHide.bind(this));}l.prototype.showFlyoutBriefly=function(){"use strict";this.showFlyout();this._flyout.hideFlyoutDelayed(5000);};l.prototype.showFlyout=function(){"use strict";this._flyout.showFlyout(this._button,true);this._flyout.inform('show',this._button);};l.prototype.hideFlyout=function(){"use strict";this._flyout.hideFlyout(true);this._flyout.inform('hide',this._button);};l.prototype.enableButton=function(){"use strict";this._flyout.initNode(this._button);};l.prototype.disableButton=function(){"use strict";this.hideFlyout();this._flyout.deactivateNode(this._button);};l.prototype._onShow=function(m,n){"use strict";h.addClass(n,"_52nd");if(h.hasClass(n,'uiButton')||h.hasClass(n,"_42fu"))h.addClass(n,'selected');if(this._flyoutAjaxify){h.addClass(this._flyoutContent,'async_saving');new g().setURI(new j(this._flyoutAjaxify)).setHandler(function(o){h.removeClass(this._flyoutContent,'async_saving');i.setContent(this._flyoutContent,o.payload);}.bind(this)).send();this._flyoutAjaxify=null;}};l.prototype._onHide=function(m,n){"use strict";h.removeClass(n,"_52nd");if(h.hasClass(n,'uiButton')||h.hasClass(n,"_42fu"))h.removeClass(n,'selected');};l.prototype.destroy=function(){"use strict";this.hideFlyout();this._flyout.destroy();};l.prototype.suppressNextMouseEnter=function(){"use strict";this._flyout.setActiveNode(this._button);};Object.assign(l.prototype,{_button:null,_flyout:null,_flyoutAjaxify:null,_flyoutContent:null});e.exports=l;},null);
__d("HoverFlyout",["Arbiter","ArbiterMixin","DataStore","Event","Keys","arrayContains","mixin","removeFromArray","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=m(h);for(var q in p)if(p.hasOwnProperty(q))s[q]=p[q];var r=p===null?null:p.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=p;function s(t,u,v,w){"use strict";p.call(this);if(t){this._showDelay=v;this._hideDelay=w;this.init(t);if(u)this.initNode(u);}g.subscribe('SwapButtonDEPRECATED/focusOnJoinButton',o(this.hideFlyout,this),g.SUBSCRIBE_ALL);}s.prototype.init=function(t){"use strict";this._flyout=t;this._showDelay=this._showDelay||0;this._hideDelay=this._hideDelay||100;this._showTimeout=null;this._hideTimeout=null;this._flyoutSubscriptions=[this._flyout.subscribe('mouseenter',this._onFlyoutMouseEnter.bind(this)),this._flyout.subscribe('mouseleave',o(this.hideFlyout,this))];this._nodes=[];this._dataStoreUnique='HoverFlyout_'+Date.now()+'_listeners';return this;};s.prototype.initNode=function(t){"use strict";if(l(this._nodes,t))return this;this._nodes.push(t);i.set(t,this._dataStoreUnique,[j.listen(t,'mouseenter',this._onNodeMouseEnter.bind(this,t)),j.listen(t,'mouseleave',o(this.hideFlyout,this)),j.listen(t,'click',this._onNodeMouseEnter.bind(this,t)),j.listen(t,'keydown',this._onNodeKeyEscape.bind(this))]);return this;};s.prototype.deactivateNode=function(t){"use strict";var u=i.get(t,this._dataStoreUnique);if(u)while(u.length)u.pop().remove();n(this._nodes,t);};s.prototype.setShowDelay=function(t){"use strict";this._showDelay=t;return this;};s.prototype.setHideDelay=function(t){"use strict";this._hideDelay=t;return this;};s.prototype.showFlyout=function(t,u){"use strict";this.setActiveNode(t);if(u){this._flyout.setContext(t).show();this.inform('show',t);}else this._showTimeout=setTimeout(this.showFlyout.bind(this,t,true),this._showDelay);return this;};s.prototype.hideFlyout=function(t){"use strict";clearTimeout(this._showTimeout);if(t){this._flyout.hide();this._activeNode&&this.inform('hide',this._activeNode);this._activeNode=null;}else this._hideTimeout=setTimeout(this.hideFlyout.bind(this,true),this._hideDelay);};s.prototype.hideFlyoutDelayed=function(t){"use strict";clearTimeout(this._showTimeout);clearTimeout(this._hideTimeout);this._hideTimeout=setTimeout(this.hideFlyout.bind(this,true),t);};s.prototype.getActiveNode=function(){"use strict";return this._activeNode;};s.prototype.setActiveNode=function(t){"use strict";clearTimeout(this._hideTimeout);if(this._activeNode&&this._activeNode!==t)this.hideFlyout(true);this._activeNode=t;return this;};s.prototype.clearNodes=function(){"use strict";for(var t=this._nodes.length;t>0;t--)this.deactivateNode(this._nodes[t-1]);};s.prototype.destroy=function(){"use strict";while(this._flyoutSubscriptions.length)this._flyout.unsubscribe(this._flyoutSubscriptions.pop());this.clearNodes();};s.prototype._onNodeMouseEnter=function(t){"use strict";if(this._activeNode===t){clearTimeout(this._hideTimeout);}else this.showFlyout(t);};s.prototype._onFlyoutMouseEnter=function(){"use strict";clearTimeout(this._hideTimeout);};s.prototype._onNodeKeyEscape=function(event){"use strict";if(j.getKeyCode(event)===k.ESC){this._activeNode&&this.inform('hide',this._activeNode);this._activeNode=null;}};e.exports=a.HoverFlyout||s;},null);